# random walks的改良(2008)

1.用toboggan 算法来局部地分类有同一纹理特点的像素。然后构造一个加权图，使每个子区域成为一个结点，用gravity算子来计算边的权重。

2.用random walks算法再度分割。

## Toboggan 分割

将原图分割为细小的区域。

基本思想是，计算梯度。计算每一个像素点滑向邻域梯度最小的位置的方向。显然，一些像素点可以代表区域梯度场的最小值。如果像素点都滑向同一个区域最小值点，则这些像素点形成一个区域。
![](https://github.com/freyakniglty/SegmentationNotes/blob/master/image/toboggan.png)

步骤：

- 计算图像的梯度场
- 获取每一个像素点的八个邻域，找出哪一个是最小梯度。继续获取这些像素点的八个邻域信息，直到梯度最小，并且标记这个点。
- 将滑向相同最小值的像素点归为一个区域。
- 查补没有标记的像素点，反复上面的操作，直到所有像素点都标记了。

## 改进权重

原始的高斯方程计算权重为：

$W_{ij} = \exp(-\beta(g_i-g_j)^2)$

Ali kemal sinop 改进为：

$W_{ij} = \exp(\beta(g_i-g_j)^2-(h_i-h_j)^2)$

$h_i$ 是空间坐标。



然而以上并不是比较理想的方法。可以把经toboggan分割得到的小的区域看做质点，像素的平均值当作质量。假设受到了万有引力。

万有引力公式为：$\vec Gravity_{i,j} = \frac{G_{m_im_j\vec r}}{||\vec r||^3}$

其中$m_i,m_j$ 是i, j 区域的平均像素。

$||\vec r|| = ||X_i - X_j||^2$

$X_i,X_j$ 是结点i,j的位置。

则有$W_{ij} = \exp(-Gravity^2_{ij}/\sigma_G) $

## 算法步骤

1.输入图像

2.用toboggan算法分割图像，将每一个小区域看做结点

3.用万有引力算子计算权重w_ij

4.人工地输入背景和标记

5.计算概率

6.输出分割的图像



# 结果

见原文献
